cmake_minimum_required(VERSION 3.15.0)
project(mapnik)

set(IS_DEBUG "False")

if(CMAKE_BUILD_TYPE EQUAL "DEBUG")
    set(IS_DEBUG "True")
endif()

find_package(Boost REQUIRED)
find_package(Freetype CONFIG REQUIRED)
find_package(SQLite3 REQUIRED)
add_custom_target(scons_configure
  COMMAND ${PYTHON_INT} ${SCONS_SC} CC="${CMAKE_C_COMPILER}" CXX="${CMAKE_CXX_COMPILER}" SQLITE_INCLUDES="${SQLite3_INCLUDE_DIRS}" SQLITE_LIBS="${SQLite3_INCLUDE_DIRS}" LINKING="${MAPNIK_LINKING}" DEBUG="${IS_DEBUG}" BOOST_INCLUDES="${Boost_INCLUDE_DIRS}" BOOST_LIBS="${Boost_LIBRARY_DIRS}" FREETYPE_INCLUDES="${FREETYPE_INCLUDE_DIR_freetype2}" FREETYPE_LIBS="${FREETYPE_LIBRARIES}" HB_INCLUDES="${HARFBUZZ_INCLUDE_DIRS}" HB_LIBS="${HARFBUZZ_LIBRARIES}"
  WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
)
set_property(TARGET scons_configure PROPERTY CXX_STANDARD 14)